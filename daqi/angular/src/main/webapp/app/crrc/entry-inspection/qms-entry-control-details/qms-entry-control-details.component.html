<div style="  display: block; width: 100%;height: 140px;height: 205px;">

    <h2 id="page-heading" class="text-left title_class">
        <span jhiTranslate="fccApp.qmsEntryControlDetails.home.title"></span>
    </h2>
    <div style="height: 40px;margin-top:0.5%;">
        <!-- 物料编码 -->
        <div class="common_div-head">
            <div class="search_styleOne">
                <span jhiTranslate="materialSelect.condition.code">物料编码</span>
            </div>
            <div class="search_styleTwo float-left">
                <input type="text" class="form-control" style="width: 100%;margin-left: 0px;    " pInputText
                    [(ngModel)]="materielCd" [disabled]="flag!=='0'" (keyup)="searchMateriel()"
                    (blur)="checkMateriel()" />
            </div>
            
        </div>
        <i *ngIf="flag==='0'" style="float: left;line-height:38px;font-size:2em;cursor:pointer;color:#1F89CE;"
                class="fa fa-search" (click)="materielPop()"></i>
        <!-- 物料名称 -->
        <div class="common_div-head">
            <div class="search_styleOne">
                <span jhiTranslate="materialSelect.condition.name">物料名称</span>
            </div>
            <div class="search_styleTwo">
                <input type="text" class="form-control" style="width: 100%;margin-left: 0px;" pInputText
                    [(ngModel)]="materielName" disabled />
            </div>
        </div>
    </div>
    <div style="height: 58px;">
        <input hidden id="file" type="file" (change)="upload($event)" accept=".xls" />
        <button id="import" icon="fa fa-plus" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_darkblue"
            [disabled]="flag==='2'" (click)="ImportExcelFile()">
            <span>
                导入
            </span>
        </button>
        <button id="clear" icon="fa fa-plus" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_red"
            [disabled]="flag==='0'&&materielId===''" (click)="emptyInfo()">
            <span>
                清空
            </span>
        </button>
        <button id="search" icon="fa fa-plus" replaceUrl="true" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_darkblue"
            [disabled]="flag==='0'&&materielId===''" (click)="search()">
            <span>
                查询
            </span>
        </button>
    </div>
    <div style="height: 58px;">
        <button id="dic" icon="fa fa-plus" replaceUrl="true" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_darkblue"
            style="padding: 0;"
            (click)="openFile()">
            <span>
                模板下载
            </span>
        </button>
        <button id="save" icon="fa fa-plus" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_red"
            [disabled]="flag==='0'||flag==='1'" (click)="save()">
            <span>
                保存
            </span>
        </button>
        <button id="edit" icon="fa fa-plus" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_darkblue"
            [disabled]="flag!=='1'" (click)="edit()">
            <span>
                编辑
            </span>
        </button>
        <button id="dic" icon="fa fa-plus" replaceUrl="true" iconPos="left"
            class="btn btn-primary float-right jh-create-entity create-qms-vehicle-type-info search_button search_button_blue"
            [disabled]="flag==='0'||flag==='1'" (click)="inspectionSelect()">
            <span>
                字典
            </span>
        </button>
    </div>
    <div style="width: 100%;border-bottom: 1px black solid;float: left;"></div>
</div>
<p-table *ngIf="qmsEntryControlDetails.length > 8" [style]="{'padding-right': '17px'}">
    <ng-template pTemplate="header">
        <tr class="common_trStyle">
            <!-- 序号 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>序号</span>
            </th>
            <!-- 检查项目 -->
            <th class="common_thStyle" style="width: 13% !important;">
                <span>检查项目</span>
            </th>
            <!-- 技术要求 -->
            <th class="common_thStyle" style="width: 18% !important;">
                <span>技术要求</span>
            </th>
            <!-- 检查器具 -->
            <th class="common_thStyle" style="width: 15% !important;">
                <span>检查器具</span>
            </th>
            <!-- 标准值 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>标准值</span>
            </th>
            <!-- 上偏差 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>上偏差</span>
            </th>
            <!-- 下偏差 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>下偏差</span>
            </th>
            <th class="common_thStyle" style="width: 14% !important;">
                <span>操作</span>
            </th>
        </tr>
    </ng-template>
</p-table>
<p-table *ngIf="8 >= qmsEntryControlDetails.length">
    <ng-template pTemplate="header">
        <tr class="common_trStyle">
            <!-- 序号 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>序号</span>
            </th>
            <!-- 检查项目 -->
            <th class="common_thStyle" style="width: 13% !important;">
                <span>检查项目</span>
            </th>
            <!-- 技术要求 -->
            <th class="common_thStyle" style="width: 18% !important;">
                <span>技术要求</span>
            </th>
            <!-- 检查器具 -->
            <th class="common_thStyle" style="width: 15% !important;">
                <span>检查器具</span>
            </th>
            <!-- 标准值 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>标准值</span>
            </th>
            <!-- 上偏差 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>上偏差</span>
            </th>
            <!-- 下偏差 -->
            <th class="common_thStyle" style="width: 10% !important;">
                <span>下偏差</span>
            </th>
            <th class="common_thStyle" style="width: 14% !important;">
                <span>操作</span>
            </th>
        </tr>
    </ng-template>
</p-table>
<p-table [value]="qmsEntryControlDetails" [loading]=this.loading [scrollable]="true" scrollHeight="584px">
    <ng-template pTemplate="body" let-qmsEntryControlDetail let-i="rowIndex">
        <tr style="line-height: 40px;">
            <!-- 序号 -->
            <td class="common_tdStyle text-center" style="width: 10% !important">
                <p>{{i+1}}</p>
            </td>
            <!-- 检查项目 -->
            <td *ngIf="flag !== '2'" class="common_tdStyle text-left" style="width: 13% !important">
                <p>{{qmsEntryControlDetail.inspectionItem}}</p>
            </td>
            <td *ngIf="flag === '2'" class="common_tdStyle text-left" style="width: 13% !important" pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" style="font-size: 23px;font-weight: bold; width: 100%; float: left;"
                            [(ngModel)]="qmsEntryControlDetail.inspectionItem" maxlength="200">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{qmsEntryControlDetail.inspectionItem}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <!-- 技术要求 -->
            <td *ngIf="flag !== '2'" class="common_tdStyle text-left" style="width: 18% !important">
                <p>{{qmsEntryControlDetail.technicalRequirement}}</p>
            </td>
            <td *ngIf="flag === '2'" class="common_tdStyle text-left" style="width: 18% !important" pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <textarea [title]="qmsEntryControlDetail.technicalRequirement" style="font-size: 23px;font-weight: bold; width: 100%; float: left;"
                            [(ngModel)]="qmsEntryControlDetail.technicalRequirement" maxlength="1000"></textarea>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{qmsEntryControlDetail.technicalRequirement}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <!-- 检查器具 -->
            <td *ngIf="flag !== '2'" class="common_tdStyle text-left" style="width: 15% !important">
                <p>{{qmsEntryControlDetail.inspectionInstrument}}</p>
            </td>
            <td *ngIf="flag === '2'" class="common_tdStyle text-left" style="width: 15% !important" pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" style="font-size: 23px;font-weight: bold; width: 100%; float: left;"
                            [(ngModel)]="qmsEntryControlDetail.inspectionInstrument" maxlength="100">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{qmsEntryControlDetail.inspectionInstrument}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <!-- 标准值 -->
            <td *ngIf="flag !== '2'" class="common_tdStyle text-right" style="width: 10% !important">
                <p>{{qmsEntryControlDetail.standard}}</p>
            </td>
            <td *ngIf="flag === '2'" class="common_tdStyle text-right" style="width: 10% !important" pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" style="font-size: 23px;font-weight: bold; width: 100%; float: left;"
                            [(ngModel)]="qmsEntryControlDetail.standard" maxlength="20">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{qmsEntryControlDetail.standard}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <!-- 上偏差 -->
            <td *ngIf="flag !== '2'" class="common_tdStyle text-right" style="width: 10% !important">
                <p>{{qmsEntryControlDetail.upperDeviation}}</p>
            </td>
            <td *ngIf="flag === '2'" class="common_tdStyle text-right" style="width: 10% !important" pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" style="font-size: 23px;font-weight: bold; width: 100%; float: left;"
                            [(ngModel)]="qmsEntryControlDetail.upperDeviation" maxlength="20">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{qmsEntryControlDetail.upperDeviation}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <!-- 下偏差 -->
            <td *ngIf="flag !== '2'" class="common_tdStyle text-right" style="width: 10% !important">
                <p>{{qmsEntryControlDetail.lowerDeviation}}</p>
            </td>
            <td *ngIf="flag === '2'" class="common_tdStyle text-right" style="width: 10% !important" pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" style="font-size: 23px;font-weight: bold; width: 100%; float: left;"
                            [(ngModel)]="qmsEntryControlDetail.lowerDeviation" maxlength="20">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{qmsEntryControlDetail.lowerDeviation}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <!-- 操作 -->
            <td class="common_tdStyle" style="width: 14% !important; padding-right: 0">
                <button id="buttonDelete" replaceUrl="true" style="margin-right: 13px; margin-left: 1em"
                    class="btn btn-primary float-left jh-create-entity create-qms-vehicle-type-info search_button Acolor_See"
                    (click)="delete(i)"
                    [disabled]="flag!=='2' || (qmsEntryControlDetail.id === undefined && qmsEntryControlDetails.length === 1 && (qmsEntryControlDetail.inspectionItem === null||qmsEntryControlDetail.inspectionItem === '') && (qmsEntryControlDetail.inspectionInstrument === null||qmsEntryControlDetail.inspectionInstrument === '') && (qmsEntryControlDetail.technicalRequirement === null||qmsEntryControlDetail.technicalRequirement === '') && (qmsEntryControlDetail.standard === null||qmsEntryControlDetail.standard === ''||qmsEntryControlDetail.standard === undefined) && (qmsEntryControlDetail.upperDeviation === null||qmsEntryControlDetail.upperDeviation === ''||qmsEntryControlDetail.upperDeviation === undefined) && (qmsEntryControlDetail.lowerDeviation === null||qmsEntryControlDetail.lowerDeviation === ''||qmsEntryControlDetail.lowerDeviation === undefined))">
                    <span>
                        删除
                    </span>
                </button>
                <button id="buttonAdd" replaceUrl="true"
                    class="btn btn-primary float-left jh-create-entity create-qms-vehicle-type-info search_button Acolor_See"
                    (click)="add(i)" [disabled]="flag!=='2'">
                    <span>
                        增加
                    </span>
                </button>
            </td>
        </tr>
    </ng-template>
</p-table>
<p-growl [(value)]="msgs1" [immutable]="false" life="300000"></p-growl>
<p-growl [(value)]="msgs" [immutable]="false" life="3000"></p-growl>